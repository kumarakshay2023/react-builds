"use strict";(self.webpackChunkdellace=self.webpackChunkdellace||[]).push([[5046],{65046:function(e,a,r){r.r(a);var l=r(1413),s=r(29439),t=r(45987),i=r(72791),o=r(77106),n=r(79286),c=r(58185),d=r(26517),u=r(59434),p=r(22339),m=r(39230),v=r(5439),f=r(87445),h=r(40077),g=r(80440),x=r(80184),Z=["applyImageCropper","label","apiEndPoints","name","defaultImageUrl","profilePicture","aspect","children"];a.default=function(e){var a=e.applyImageCropper,r=void 0===a||a,j=e.label,y=void 0===j?"":j,b=e.apiEndPoints,I=e.name,U=e.defaultImageUrl,A=e.profilePicture,N=void 0!==A&&A,w=(e.aspect,e.children),C=(0,t.Z)(e,Z),P=(0,m.$G)().t,L=(0,u.v9)(g.tT),E=(0,u.I0)(),O=(0,i.useState)(!1),R=(0,s.Z)(O,2),S=R[0],T=R[1],k=(0,i.useState)(),z=(0,s.Z)(k,2),M=z[0],B=z[1],D=(0,p.U$)(I),F=(0,s.Z)(D,3),G=F[0],$=F[1],_=F[2],K=(0,l.Z)((0,l.Z)({},G),C),V=(0,v.KO)();$&&$.touched&&$.error&&(K.error=!0,K.helperText=$.error),(0,i.useEffect)((function(){B(U||"".concat(h.Z.ADMIN_IMAGE_URL,"/logo-default.jpg"))}),[U]);var q=function(e){var a="image/jpeg"===e.type||"image/png"===e.type;a||(0,f.Z)({type:"error",message:P("text.common.imageOnlyMessgae")});var r=e.size/1024/1024<5;return r||(0,f.Z)({type:"error",message:P("text.common.imageSizeExceedingMessage")}),a&&r},H=function(e){if("uploading"===e.file.status)T(!0);else{var a=e.file,r=a.status,s=a.response;if("done"===r){var t;if(function(e,a){var r=new FileReader;r.addEventListener("load",(function(){return a(r.result)})),r.readAsDataURL(e)}(e.file.originFileObj,(function(e){T(!1),B(e)})),(0,f.Z)({type:"success",message:"Image uploaded successfully"}),N){var i,o=(0,l.Z)({},L);o.profilePicture=null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.url,E((0,g.L1)(o))}_.setValue(s.data.basePath||s.data.basePathUrl||(null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.url))}else if("error"===r){var n,c,d;T(!1),(0,f.Z)({type:"error",message:null===e||void 0===e||null===(n=e.fileList[0])||void 0===n||null===(c=n.response)||void 0===c?void 0:c.message,description:"".concat(e.file.name," file upload failed. ").concat(e.file.response.detail)}),-1!==(null===s||void 0===s||null===(d=s.detail)||void 0===d?void 0:d.search("authenticated"))&&(0,v.Pj)()}}},J=(0,x.jsxs)("div",{children:[S?(0,x.jsx)(o.Z,{}):(0,x.jsx)(n.Z,{}),(0,x.jsx)("div",{style:{marginTop:8},children:(0,x.jsxs)("div",{className:"my-auto text-center",children:[(0,x.jsx)("span",{className:"icon-camera"}),(0,x.jsx)("div",{className:"font-sm txt",children:"+ Upload Image"})]})})]});return r?(0,x.jsx)(c.Z.Item,{label:y,className:"flex-col",name:I,help:$.error&&null!==$&&void 0!==$&&$.error&&null!==$&&void 0!==$&&$.touched?$.error:"",validateStatus:K.error?"error":"success",children:(0,x.jsxs)(d.Z,(0,l.Z)((0,l.Z)({name:"file",type:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:b,beforeUpload:q,onChange:H,disabled:S},C),{},{headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(V)},children:[M?S?(L.userRole,(0,x.jsx)(o.Z,{})):(0,x.jsx)("img",{src:M,alt:"avatar",style:{height:"100%"}}):J,w]}))}):(0,x.jsx)(c.Z.Item,{label:y,className:"flex-col",name:I,help:$.error&&null!==$&&void 0!==$&&$.error&&null!==$&&void 0!==$&&$.touched?$.error:"",validateStatus:K.error?"error":"success",children:(0,x.jsxs)(d.Z,(0,l.Z)((0,l.Z)({name:"file",type:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:b,beforeUpload:q,onChange:H},C),{},{headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(V)},children:[M?S?"admin"===L.userRole?(0,x.jsx)(o.Z,{}):(0,x.jsx)(o.Z,{className:"text-white"}):(0,x.jsx)("img",{src:M,alt:"avatar",style:{height:"100%"}}):J,w]}))})}}}]);
//# sourceMappingURL=5046.7ec309ca.chunk.js.map